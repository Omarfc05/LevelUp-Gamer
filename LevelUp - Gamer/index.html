<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Inicio | LEVEL-UP GAMER</title>
  <link rel="icon" href="assets/images/iconfeo.png" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/style.css">
</head>
<body class="bg-black text-white">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-secondary sticky-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
        <img src="assets/images/logofeo.png" alt="Logo LEVEL-UP GAMER" height="50" class="d-inline-block align-text-top">
        <span class="logo-text">LEVEL-UP <span class="text-accent">GAMER</span></span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navmenu">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-3">
          <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="catalogo.html">Cat√°logo</a></li>
          <li class="nav-item"><a class="nav-link" href="resenas.html">Rese√±as</a></li> <!-- CORREGIDO -->
          <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>

          <!-- Bot√≥n de registro (visible si NO hay usuario activo) -->
          <li class="nav-item" id="registerBtn" style="display:none;">
            <a href="registro.html" class="btn btn-sm btn-accent">Registrarse</a>
          </li>

          <!-- Dropdown de usuario activo -->
          <li class="nav-item dropdown" id="userDropdown" style="display:none;">
            <a class="nav-link dropdown-toggle text-accent" href="#" data-bs-toggle="dropdown" aria-expanded="false" id="userName"></a>
            <ul class="dropdown-menu dropdown-menu-dark">
              <li><a class="dropdown-item" href="perfil.html">Perfil</a></li>
              <li><a class="dropdown-item" href="#" id="logoutBtn">Cerrar sesi√≥n</a></li>
            </ul>
          </li>

          <!-- Carrito -->
          <li class="nav-item">
            <a class="nav-link position-relative" href="carrito.html">
              üõí Carrito
              <span id="cartCounter" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <header class="hero container py-5">
    <div class="row align-items-center g-4">
      <div class="col-lg-6">
        <h1 class="display-5 fw-bold title">Sube de nivel tu setup</h1>
        <p class="lead text-secondary">
          Creado por <strong>Crist√≥bal Jerez Donoso, Omar Filun Cabrera</strong> y el equipo LEVEL-UP GAMER. Consolas, perif√©ricos, PCs y m√°s. Env√≠os a todo Chile y un programa de fidelizaci√≥n con puntos
          <span class="fw-bold">LevelUp</span>.
        </p>
        <a href="catalogo.html" class="btn btn-accent btn-lg">Ver cat√°logo</a>
      </div>
      <div class="col-lg-6 text-center">
        <div class="hero-card p-4 rounded-4 shadow-lg">
          <img src="assets/images/pngtree-high-performance-gaming-pc-setup-with-rgb-lights-and-accessories-png-image_16008815-Photoroom.png" class="img-fluid rounded-4" alt="Set up gamer">
        </div>
      </div>
    </div>
  </header>

  <!-- Productos Destacados -->
  <section class="container py-5">
    <h2 class="h3 mb-4">¬° Productos Destacados !</h2>
    <div class="row g-4">
      <!-- Producto 1 -->
      <div class="col-md-4">
        <a href="notfound.html">
        <div class="card h-100 text-center">
          <img src="assets/images/3DBox_CATAN_BaseGame_NE-Photoroom.png" class="card-img-top" alt="Catan">
          <div class="card-body">
            <h5 class="card-title">Catan</h5>
            <p class="card-text">Juego de estrategia cl√°sico. Ideal para 3-4 jugadores.</p>
            <p class="fw-bold">$29.990 CLP</p>
            <button class="btn btn-primary w-100" onclick="agregarAlCarrito('CATAN')">A√±adir al carrito</button>
          </div>
        </div>
        </a>
      </div>
      <!-- Producto 2 -->
      <div class="col-md-4">
        <div class="card h-100 text-center">
          <img src="assets/images/cacasonnenoBG.png" class="card-img-top" alt="Carcassonne">
          <div class="card-body">
            <h5 class="card-title">Carcassonne</h5>
            <p class="card-text">Juego de fichas medieval f√°cil de aprender.</p>
            <p class="fw-bold">$24.990 CLP</p>
            <button class="btn btn-primary w-100" onclick="agregarAlCarrito('CARCASSONNE')">A√±adir al carrito</button>
          </div>
        </div>
      </div>
      <!-- Producto 3 -->
      <div class="col-md-4">
        <div class="card h-100 text-center">
          <img src="assets/images/oNmXBUydOnE2RCdFrlptBy1PzPufLskAVHYkbsXw.png" class="card-img-top" alt="Control Xbox Series X">
          <div class="card-body">
            <h5 class="card-title">Control Xbox Series X</h5>
            <p class="card-text">Control inal√°mbrico con botones mapeables.</p>
            <p class="fw-bold">$59.990 CLP</p>
            <button class="btn btn-primary w-100" onclick="agregarAlCarrito('XBOXCTRL')">A√±adir al carrito</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="d-flex justify-content-center">
    <a href="catalogo.html" class="btn btn-secondary">Ver Cat√°logo Completo</a>
  </div>

  <!-- Footer -->
  <footer class="mt-5 border-top border-secondary py-4">
    <div class="container d-flex flex-wrap justify-content-between align-items-center">
      <p class="mb-0 small text-secondary">¬© <span id="year"></span> LEVEL-UP GAMER ‚Äî Todos los derechos reservados.</p>
      <div class="d-flex gap-3">
        <a class="text-secondary" href="#" aria-label="Instagram">üì∑</a>
        <a class="text-secondary" href="#" aria-label="TikTok">üéµ</a>
        <a class="text-secondary" href="#" aria-label="X">‚úñÔ∏è</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="assets/js/validaciones.js" defer></script>
  <script src="assets/js/carrito.js" defer></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const PRODUCTOS = [
      {code:'CATAN', name:'Catan', price:29990},
      {code:'CARCASSONNE', name:'Carcassonne', price:24990},
      {code:'XBOXCTRL', name:'Control Xbox Series X', price:59990},
    ];

    // Manejo de usuario activo / registro
    document.addEventListener("DOMContentLoaded", () => {
      const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      const usuarioActivo = usuarios[usuarios.length - 1];

      const registerBtn = document.getElementById("registerBtn");
      const userDropdown = document.getElementById("userDropdown");
      const userName = document.getElementById("userName");
      const logoutBtn = document.getElementById("logoutBtn");

      if (usuarioActivo) {
        registerBtn.style.display = "none";
        userDropdown.style.display = "block";
        userName.textContent = `üë§ ${usuarioActivo.nombre} | ‚≠ê ${usuarioActivo.puntos || 0} pts`;

        logoutBtn.addEventListener("click", () => {
          usuarios.pop();
          localStorage.setItem("usuarios", JSON.stringify(usuarios));
          location.reload();
        });
      } else {
        registerBtn.style.display = "block";
        userDropdown.style.display = "none";
      }
    });

    // Resaltar la pesta√±a activa en el navbar
    const enlaces = document.querySelectorAll('.navbar-nav .nav-link');
    enlaces.forEach(link => {
      if (link.getAttribute('href') === location.pathname.split("/").pop()) {
        link.classList.add('active');
      }
    });
  </script>
</body>
</html>
